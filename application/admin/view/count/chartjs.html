{extend name="index/index"}
{block name="main"}

<body class="sticky-header">

<section>

    <div class="container-fluid">
        <div class="page-heading mt20">
            <h3>
                网站数据统计
            </h3>
            <ul class="breadcrumb">
                <li>
                    <a href="{:url('/chartjs')}">首页</a>
                </li>
                <li class="active"> 统计 </li>
            </ul>
        </div>

        <div class="wraper">
            <div class="row">
                <!--总计-->
                <div class="col-sm-12" style="margin-top: 20px">
                    <section class="panel">
                        <div class="counter col_fourth" style="float:left;margin-left:100px;text-align: center">
                            <!--<i class="fa fa-code fa-2x"></i>-->
                            <img src="/static/app/admin/images/count/count.png" width="30">
                            <h2 class="timer count-title" id="count-number" data-to="{$view}" data-speed="1500"></h2>
                            <p class="count-text ">历史访问量</p>
                        </div>

                        <div class="counter col_fourth" style="float:left;margin-left:110px;text-align: center">
                            <!--<i class="fa fa-coffee fa-2x"></i>-->
                            <img src="/static/app/admin/images/count/user.png" width="30">
                            <h2 class="timer count-title" id="count-number" data-to="{$register}" data-speed="1500"></h2>
                            <p class="count-text ">历史注册人数</p>
                        </div>

                        <div class="counter col_fourth end" style="float:left;margin-left:110px;text-align: center">
                            <!--<i class="fa fa-bug fa-2x"></i>-->
                            <img src="/static/app/admin/images/count/bus.png" width="30">
                            <h2 class="timer count-title" id="count-number" data-to="{$bus}" data-speed="1500"></h2>
                            <p class="count-text ">入驻商家</p>
                        </div>

                        <div class="counter col_fourth" style="float:left;margin-left:110px;text-align: center">
                            <!--<i class="fa fa-lightbulb-o fa-2x"></i>-->
                            <img src="/static/app/admin/images/count/countmoney.png" width="30">
                            <h2 class="timer count-title" id="count-number" data-to="{$trade}" data-speed="1500"></h2>
                            <p class="count-text ">历史交易量</p>
                        </div>

                        <div class="counter col_fourth end" style="float:left;margin-left:110px;text-align: center">
                            <!--<i class="fa fa-bug fa-2x"></i>-->
                            <img src="/static/app/admin/images/count/money.png" width="30">
                            <h2 class="timer count-title" id="count-number" data-to="{$total}" data-speed="1500"></h2>
                            <p class="count-text ">历史交易金额</p>
                        </div>


                    </section>
                </div>
                <!--用户统计-->
                <div class="col-sm-6" style="margin-top: 20px">
                    <section class="panel">
                        <header class="panel-heading">
                            用户统计
                            <span class="tools pull-right">
                            <a href="javascript:;" class="fa fa-chevron-down"></a>
                            <a href="javascript:;" class="fa fa-times"></a>
                         </span>
                        </header>
                        <div class="panel-body" style="height: 630px">
                            <div id="content" style="height: 520px">

                                <div class="legend">

                                    <!--<h1>Legend:</h1>-->

                                    <div class="skills">

                                        <!--<ul>-->

                                        <!--<li class="jq">今日访问量</li>-->

                                        <!--<li class="css">CSS3</li>-->

                                        <!--<li class="html">HTML5</li>-->

                                        <!--<li class="php">PHP</li>-->

                                        <!--<li class="sql">MySQL</li>-->

                                        <!--</ul>-->

                                    </div>

                                </div>

                                <div id="diagram"></div>

                            </div>



                            <div class="footer">

                                <div class="inside">



                                </div>

                            </div>



                            <div class="get">


                                <div class="arc">

                                    <span class="text">性别未知用户</span><span>：{$nsecrecy}</span>

                                    <input type="hidden" class="percent" value="{:round($nsecrecy)}" />

                                    <input type="hidden" class="color" value="#97BE0D" />

                                </div>

                                <div class="arc">

                                    <span class="text">男性用户</span><span>：{$nmale}</span>

                                    <input type="hidden" class="percent" value="{:round($male)}" />

                                    <input type="hidden" class="color" value="#D84F5F" />

                                </div>

                                <div class="arc">

                                    <span class="text">女性用户</span><span>：{$nfemale}</span>

                                    <input type="hidden" class="percent" value="{:round($female)}" />

                                    <input type="hidden" class="color" value="#88B8E6" />

                                </div>

                                <!--<div class="arc">-->

                                <!--<span class="text"></span>-->

                                <!--<input type="hidden" class="percent" value="{$secrecy}" />-->

                                <!--<input type="hidden" class="color" value="#BEDBE9" />-->

                                <!--</div>-->

                                <!--<div class="arc">-->

                                <!--&lt;!&ndash;<span class="text">MySQL</span>&ndash;&gt;-->

                                <!--<input type="hidden" class="percent" value="45" />-->

                                <!--<input type="hidden" class="color" value="#EDEBEE" />-->

                                <!--</div>-->

                            </div>

                        </div>
                    </section>
                </div>
                <!--访问量统计-->
                <div class="col-sm-6" style="margin-top: 20px">
                    <section class="panel">
                        <header class="panel-heading">
                            访问量
                            <span class="tools pull-right">
                            <a href="javascript:;" class="fa fa-chevron-down"></a>
                            <a href="javascript:;" class="fa fa-times"></a>
                         </span>
                        </header>
                        <div class="panel-body">
                            <div id="main3" style="height:400px; width:400px;margin:0 auto;"></div>
                            <span style="display: none;" id="tview">{$tview}</span>
                            <span style="display: none;" id="yview">{$yview}</span>
                            <span style="display: none;" id="wview">{$wview}</span>
                            <span style="display: none;" id="mview">{$mview}</span>
                        </div>
                    </section>
                </div>
                <!--注册量统计-->
                <div class="col-sm-6" style="margin-top: 20px">
                    <section class="panel">
                        <header class="panel-heading">
                            注册量
                            <span class="tools pull-right">
                            <a href="javascript:;" class="fa fa-chevron-down"></a>
                            <a href="javascript:;" class="fa fa-times"></a>
                         </span>
                        </header>
                        <div class="panel-body">
                            <div id="main4" style="height:400px; width:400px;margin:0 auto;"></div>
                            <span style="display: none;" id="tregister">{$tregister}</span>
                            <span style="display: none;" id="yregister">{$yregister}</span>
                            <span style="display: none;" id="wregister">{$wregister}</span>
                            <span style="display: none;" id="mregister">{$mregister}</span>
                        </div>
                    </section>
                </div>
                <!--产品销量统计-->
                <div class="col-sm-6" style="margin-top: 20px">
                    <section class="panel">
                        <header class="panel-heading">
                            产品销量
                            <span class="tools pull-right">
                            <a href="javascript:;" class="fa fa-chevron-down"></a>
                            <a href="javascript:;" class="fa fa-times"></a>
                         </span>
                        </header>
                        <div class="panel-body">
                            <div id="main" style="height:400px; width:400px;margin:0 auto;"></div>
                            <span style="display: none;" id="active">{$active}</span>
                            <span style="display: none;" id="hotel">{$hotel}</span>
                            <span style="display: none;" id="route">{$route}</span>
                            <span style="display: none;" id="food">{$food}</span>
                            <span style="display: none;" id="scenery">{$scenery}</span>
                        </div>
                    </section>
                </div>
                <!--产品时间交易量-->
                <div class="col-sm-6" style="margin-top: 20px">
                    <section class="panel">
                        <header class="panel-heading">
                            交易量
                            <span class="tools pull-right">
                            <a href="javascript:;" class="fa fa-chevron-down"></a>
                            <a href="javascript:;" class="fa fa-times"></a>
                         </span>
                        </header>
                        <div class="panel-body">
                            <div id="main1" style="height:400px; width:400px;margin:0 auto;"></div>
                            <span style="display: none;" id="ttrade">{$ttrade}</span>
                            <span style="display: none;" id="ytrade">{$ytrade}</span>
                            <span style="display: none;" id="wtrade">{$wtrade}</span>
                            <span style="display: none;" id="mtrade">{$mtrade}</span>
                        </div>
                    </section>
                </div>
                <!--交易金额统计-->
                <div class="col-sm-6" style="margin-top: 20px">
                    <section class="panel">
                        <header class="panel-heading">
                            交易金额
                            <span class="tools pull-right">
                            <a href="javascript:;" class="fa fa-chevron-down"></a>
                            <a href="javascript:;" class="fa fa-times"></a>
                         </span>
                        </header>
                        <div class="panel-body">
                            <div id="main2" style="height:400px; width:400px;margin:0 auto;"></div>
                            <span style="display: none;" id="ttotal">{$ttotal}</span>
                            <span style="display: none;" id="ytotal">{$ytotal}</span>
                            <span style="display: none;" id="wtotal">{$wtotal}</span>
                            <span style="display: none;" id="mtotal">{$mtotal}</span>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
    <!-- main content end-->
</section>
{/block}
{block name="myjs"}
<!-- Placed js at the end of the document so the pages load faster -->
<script src="/static/app/admin/js/jquery-1.10.2.min.js"></script>
<script src="/static/app/admin/js/jquery-ui-1.9.2.custom.min.js"></script>
<script src="/static/app/admin/js/jquery-migrate-1.2.1.min.js"></script>
<script src="/static/app/admin/js/bootstrap.min.js"></script>
<script src="/static/app/admin/js/modernizr.min.js"></script>
<script src="/static/app/admin/js/jquery.nicescroll.js"></script>

<!--Chart JS-->
<script src="/static/app/admin/js/chart-js/Chart.js"></script>
<script src="/static/app/admin/js/chart-js/chartjs.init.js"></script>

<!--common scripts for all pages-->
<script src="/static/app/admin/js/scripts.js"></script>
<!--饼状图插件-->
<script src="/static/app/admin/js/init.js"></script>
<script src="/static/app/admin/js/jquery.js"></script>
<script src="/static/app/admin/js/raphael.js"></script>
<!--统计-->
<script src="/static/app/admin/js/echarts.js"></script>
<script src="/static/app/admin/js/1-6-10.esl.js"></script>
<!--总计-->
<script src='/static/app/admin/js/jquery.js'></script>
<script src="/static/app/admin/js/index.js"></script>
<script>
    // 路径配置
    require.config({
        paths:{
            'echarts' : '/static/app/admin/js/echarts',
            'echarts/chart/pie' : '/static/app/admin/js/echarts'
        }
    });

    // 统计各类产品销量
    require(
        [
            'echarts',
            'echarts/chart/pie' // 使用柱状图就加载bar模块，按需加载
        ],
        function (ec) {
            // 基于准备好的dom，初始化echarts图表
            var myChart = ec.init(document.getElementById('main'));
            var active = $('#active').text();
            var hotel = $('#hotel').text();
            var food = $('#food').text();
            var route = $('#route').text();
            var scenery = $('#scenery').text();

            var option = {
                title : {
                    text: '',
                    subtext: '',
                    x:'center'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient : 'vertical',
                    x : 'left',
                    data:[]
                },
                toolbox: {
                    show : true,
                    feature : {
                        mark : {show: true},
                        dataView : {show: true, readOnly: false},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                calculable : true,
                series : [
                    {
                        name:'网站数据',
                        type:'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data:[
                            {value:active, name:'活动'},
                            {value:hotel, name:'酒店住宿'},
                            {value:route, name:'旅游路线'},
                            {value:scenery, name:'景区门票'},
                            {value:food, name:'特产美食'}
                        ]
                    }
                ]
            };


            myChart.setOption(option);
        }
    );

    //    统计时间单位交易量
    require(
        [
            'echarts',
            'echarts/chart/pie' // 使用柱状图就加载bar模块，按需加载
        ],
        function (ec) {
            // 基于准备好的dom，初始化echarts图表
            var myChart = ec.init(document.getElementById('main1'));
            var ttrade = $('#ttrade').text();
            var ytrade = $('#ytrade').text();
            var wtrade = $('#wtrade').text();
            var mtrade = $('#mtrade').text();

            var option = {
                title : {
                    text: '',
                    subtext: '',
                    x:'center'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient : 'vertical',
                    x : 'left',
                    data:[]
                },
                toolbox: {
                    show : true,
                    feature : {
                        mark : {show: true},
                        dataView : {show: true, readOnly: false},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                calculable : true,
                series : [
                    {
                        name:'网站数据',
                        type:'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data:[
                            {value:ttrade, name:'今日交易量'},
                            {value:ytrade, name:'昨日交易量'},
                            {value:wtrade, name:'一周交易量'},
                            {value:mtrade, name:'月交易量'},
                        ]
                    }
                ]
            };


            myChart.setOption(option);
        }
    );

    //    统计交易金额
    require(
        [
            'echarts',
            'echarts/chart/pie' // 使用柱状图就加载bar模块，按需加载
        ],
        function (ec) {
            // 基于准备好的dom，初始化echarts图表
            var myChart = ec.init(document.getElementById('main2'));
            var ttotal = $('#ttotal').text();
            var ytotal = $('#ytotal').text();
            var wtotal = $('#wtotal').text();
            var mtotal = $('#mtotal').text();

            var option = {
                title : {
                    text: '',
                    subtext: '',
                    x:'center'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient : 'vertical',
                    x : 'left',
                    data:[]
                },
                toolbox: {
                    show : true,
                    feature : {
                        mark : {show: true},
                        dataView : {show: true, readOnly: false},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                calculable : true,
                series : [
                    {
                        name:'网站数据',
                        type:'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data:[
                            {value:ttotal, name:'今日交易额'},
                            {value:ytotal, name:'昨日交易额'},
                            {value:wtotal, name:'一周交易额'},
                            {value:mtotal, name:'月交易额'},
                        ]
                    }
                ]
            };


            myChart.setOption(option);
        }
    );

    //    统计访问量
    require(
        [
            'echarts',
            'echarts/chart/pie' // 使用柱状图就加载bar模块，按需加载
        ],
        function (ec) {
            // 基于准备好的dom，初始化echarts图表
            var myChart = ec.init(document.getElementById('main3'));
            var tview = $('#tview').text();
            var yview = $('#yview').text();
            var wview = $('#wview').text();
            var mview = $('#mview').text();

            var option = {
                title : {
                    text: '',
                    subtext: '',
                    x:'center'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient : 'vertical',
                    x : 'left',
                    data:[]
                },
                toolbox: {
                    show : true,
                    feature : {
                        mark : {show: true},
                        dataView : {show: true, readOnly: false},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                calculable : true,
                series : [
                    {
                        name:'网站数据',
                        type:'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data:[
                            {value:tview, name:'今日访问量'},
                            {value:yview, name:'昨日访问量'},
                            {value:wview, name:'一周访问量'},
                            {value:mview, name:'月访问量'},
                        ]
                    }
                ]
            };


            myChart.setOption(option);
        }
    );

    //    统计注册量
    require(
        [
            'echarts',
            'echarts/chart/pie' // 使用柱状图就加载bar模块，按需加载
        ],
        function (ec) {
            // 基于准备好的dom，初始化echarts图表
            var myChart = ec.init(document.getElementById('main4'));
            var tregister = $('#tregister').text();
            var yregister = $('#yregister').text();
            var wregister = $('#wregister').text();
            var mregister = $('#mregister').text();

            var option = {
                title : {
                    text: '',
                    subtext: '',
                    x:'center'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient : 'vertical',
                    x : 'left',
                    data:[]
                },
                toolbox: {
                    show : true,
                    feature : {
                        mark : {show: true},
                        dataView : {show: true, readOnly: false},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                calculable : true,
                series : [
                    {
                        name:'网站数据',
                        type:'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data:[
                            {value:tregister, name:'今日注册量'},
                            {value:yregister, name:'昨日注册量'},
                            {value:wregister, name:'一周注册量'},
                            {value:mregister, name:'月注册量'},
                        ]
                    }
                ]
            };


            myChart.setOption(option);
        }
    );
</script>
</body>
</html>
{/block}
